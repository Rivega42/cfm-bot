# ğŸ“š Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞµ CFM Bot

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ
1. [Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](#Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
2. [ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ](#Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ°-Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ)
3. [ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°-Ğ±Ğ°Ğ·Ñ‹-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
4. [ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Telegram Ğ±Ğ¾Ñ‚Ğ°](#Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°-telegram-Ğ±Ğ¾Ñ‚Ğ°)
5. [ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° n8n](#Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°-n8n)
6. [Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#Ğ·Ğ°Ğ¿ÑƒÑĞº-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
7. [ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸](#Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°-Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸)
8. [Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼](#Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ-Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼)

## ğŸ”§ Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **ĞĞ¡**: Linux (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ubuntu 20.04+) Ğ¸Ğ»Ğ¸ macOS
- **RAM**: ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 4GB (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ 8GB)
- **Ğ”Ğ¸ÑĞº**: ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 20GB ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑÑ‚Ğ°
- **CPU**: 2+ ÑĞ´Ñ€Ğ°

### ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾Ğµ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ğµ
- **Node.js**: Ğ²ĞµÑ€ÑĞ¸Ñ 18.0.0 Ğ¸Ğ»Ğ¸ Ğ²Ñ‹ÑˆĞµ
- **PostgreSQL**: Ğ²ĞµÑ€ÑĞ¸Ñ 15.0 Ğ¸Ğ»Ğ¸ Ğ²Ñ‹ÑˆĞµ
- **n8n**: Ğ²ĞµÑ€ÑĞ¸Ñ 1.108.2
- **Git**: Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ²ĞµÑ€ÑĞ¸Ñ
- **Docker** (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾): Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

## ğŸš€ ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

### 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
```bash
git clone https://github.com/Rivega42/cfm-bot.git
cd cfm-bot
```

### 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
```bash
# Ğ•ÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚Ğµ npm
npm install

# Ğ•ÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚Ğµ yarn
yarn install
```

### 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
```bash
cp .env.example .env
```

### 4. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ .env Ñ„Ğ°Ğ¹Ğ»Ğ°
```bash
nano .env
# Ğ¸Ğ»Ğ¸
code .env
```

## ğŸ’¾ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° PostgreSQL
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install postgresql postgresql-contrib

# macOS
brew install postgresql
brew services start postgresql
```

### 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```bash
sudo -u postgres psql
```

```sql
-- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
CREATE USER cfm_user WITH PASSWORD 'Ğ²Ğ°Ñˆ_Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹_Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ';

-- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
CREATE DATABASE cfm_database OWNER cfm_user;

-- ĞŸÑ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²
GRANT ALL PRIVILEGES ON DATABASE cfm_database TO cfm_user;

-- Ğ’Ñ‹Ñ…Ğ¾Ğ´
\q
```

### 3. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ÑÑ…ĞµĞ¼Ñ‹
```bash
cd database
psql -U cfm_user -d cfm_database -f schema.sql
```

### 4. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```bash
psql -U cfm_user -d cfm_database -f seeds/questions.sql
```

## ğŸ¤– ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Telegram Ğ±Ğ¾Ñ‚Ğ°

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ¾Ñ‚Ğ°
1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ [@BotFather](https://t.me/botfather) Ğ² Telegram
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ `/newbot`
3. Ğ¡Ğ»ĞµĞ´ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸ÑĞ¼:
   - Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¸Ğ¼Ñ Ğ±Ğ¾Ñ‚Ğ°: `CFM Customer Feedback Bot`
   - Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ username: `CFmatch_bot` (Ğ¸Ğ»Ğ¸ ÑĞ²Ğ¾Ğ¹ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½

### 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ±Ğ¾Ñ‚Ğ°
```bash
# ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ BotFather
/setcommands

# Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ° Ğ¸ Ğ²ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ:
start - ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ€Ğ¾Ñ
help - ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ
status - Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¾Ğ¿Ñ€Ğ¾ÑĞ°
language - Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑĞ·Ñ‹Ğº
reset - ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾
cancel - ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ñ€Ğ¾Ñ
```

### 3. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ° Ğ² .env
```env
TELEGRAM_BOT_TOKEN=Ğ²Ğ°Ñˆ_Ñ‚Ğ¾ĞºĞµĞ½_Ğ·Ğ´ĞµÑÑŒ
```

## ğŸ”„ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° n8n

### 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° n8n

#### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ A: Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
```bash
npm install n8n -g
```

#### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ B: Docker
```bash
docker run -it --rm \
  --name n8n \
  -p 5678:5678 \
  -v ~/.n8n:/home/node/.n8n \
  n8nio/n8n:1.108.2
```

### 2. Ğ—Ğ°Ğ¿ÑƒÑĞº n8n
```bash
# Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
n8n start --tunnel

# Ğ˜Ğ»Ğ¸ Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼
n8n start --port=5678 --tunnel
```

### 3. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ workflows

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ n8n Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ: http://localhost:5678
2. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² "Workflows" â†’ "Import"
3. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ `/workflows`:
   - `main-router.json`
   - `question-handler.json`
   - `analytics-processor.json`

### 4. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ÑƒÑ‡ĞµÑ‚Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### PostgreSQL Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
1. Ğ’ n8n Ğ¿ĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² "Credentials" â†’ "New"
2. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ "Postgres"
3. Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:
   ```
   Host: localhost
   Database: cfm_database
   User: cfm_user
   Password: Ğ²Ğ°Ñˆ_Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
   Port: 5432
   SSL: Disable
   ```

#### Telegram Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
1. Ğ’ workflow Ğ½Ğ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ Telegram Ğ½Ğ¾Ğ´Ñ‹
2. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ credentials:
   ```
   Access Token: Ğ²Ğ°Ñˆ_telegram_bot_token
   ```

### 5. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Webhook

#### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ webhook URL
1. Ğ’ n8n Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ workflow "Main Router"
2. ĞšĞ»Ğ¸ĞºĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° "Webhook" Ğ½Ğ¾Ğ´Ñƒ
3. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Production URL

#### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° webhook Ğ² Telegram
```bash
curl -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/setWebhook" \
  -H "Content-Type: application/json" \
  -d "{
    \"url\": \"https://Ğ²Ğ°Ñˆ-n8n-url/webhook/telegram-bot\",
    \"allowed_updates\": [\"message\", \"callback_query\"]
  }"
```

## â–¶ï¸ Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
cat > start.sh << 'EOF'
#!/bin/bash

# Ğ—Ğ°Ğ¿ÑƒÑĞº PostgreSQL
sudo service postgresql start

# Ğ—Ğ°Ğ¿ÑƒÑĞº n8n
n8n start --tunnel &

# ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
sleep 5

echo "âœ… Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ñ‹!"
echo "ğŸ“Š n8n Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ: http://localhost:5678"
echo "ğŸ¤– Telegram Ğ±Ğ¾Ñ‚: @CFmatch_bot"
EOF

chmod +x start.sh
./start.sh
```

### 2. ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ workflows

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ n8n Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
2. Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ workflow:
   - ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ workflow
   - ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "Active" toggle
   - Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑ "Active"

## âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸

### 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```bash
psql -U cfm_user -d cfm_database -c "SELECT COUNT(*) FROM questions;"
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ: 40
```

### 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° webhook
```bash
curl "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getWebhookInfo"
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²Ğ°Ñˆ webhook URL
```

### 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ¾Ñ‚Ğ°
1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Telegram
2. ĞĞ°Ğ¹Ğ´Ğ¸Ñ‚Ğµ @CFmatch_bot
3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/start`
4. Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ¹Ñ‚Ğ¸ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ

### 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° n8n
```bash
curl http://localhost:5678/healthz
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ: {"status":"ok"}
```

## ğŸ”§ Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑ PostgreSQL
sudo service postgresql status

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸
sudo tail -f /var/log/postgresql/*.log

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
psql -U cfm_user -d cfm_database -c "SELECT 1;"
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Telegram webhook Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
```bash
# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ webhook
curl -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/deleteWebhook"

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾
curl -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/setWebhook" \
  -d "url=https://Ğ²Ğ°Ñˆ-url/webhook/telegram-bot"
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: n8n Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ¾Ñ€Ñ‚
lsof -i :5678

# Ğ£Ğ±ĞµĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ½ÑÑ‚
kill -9 $(lsof -t -i:5678)

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¾Ğ¹
DEBUG=* n8n start
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Workflow Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ²ÑĞµ credentials
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ² n8n Execution
3. Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ½Ğ¾Ğ´Ñƒ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾

## ğŸ“ Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°)
```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Certbot
sudo apt install certbot

# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ°
sudo certbot certonly --standalone -d Ğ²Ğ°Ñˆ-Ğ´Ğ¾Ğ¼ĞµĞ½.com
```

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Nginx (reverse proxy)
```nginx
server {
    listen 443 ssl;
    server_name Ğ²Ğ°Ñˆ-Ğ´Ğ¾Ğ¼ĞµĞ½.com;
    
    ssl_certificate /etc/letsencrypt/live/Ğ²Ğ°Ñˆ-Ğ´Ğ¾Ğ¼ĞµĞ½.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/Ğ²Ğ°Ñˆ-Ğ´Ğ¾Ğ¼ĞµĞ½.com/privkey.pem;
    
    location / {
        proxy_pass http://localhost:5678;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
    }
}
```

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° PM2
npm install pm2 -g

# Ğ—Ğ°Ğ¿ÑƒÑĞº n8n Ñ‡ĞµÑ€ĞµĞ· PM2
pm2 start n8n

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
pm2 startup
pm2 save
```

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°**: 4 ÑĞµĞ½Ñ‚ÑĞ±Ñ€Ñ 2025
**Ğ’ĞµÑ€ÑĞ¸Ñ**: 1.0.0

ğŸ’¡ **Ğ¡Ğ¾Ğ²ĞµÑ‚**: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸ Ğ¸ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ² Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ!